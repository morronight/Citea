<?php require_once 'template/template_horairesHL.php';require_once 'include/Bus.php';$horaires = Bus::getListeHoraire();$file = TableauHorsLigne($horaires,$force = 1);$nomFichier = "dataHorsLigne.html";$filepath = Configuration::$Documents['location'].$nomFichier;if (is_file($filepath)){		$requestHeaders = apache_request_headers();	if (isset($requestHeaders['If-Modified-Since']))	{		if (strpos($requestHeaders['If-Modified-Since'], ';') === false)			$ifModified = new DateTime($requestHeaders['If-Modified-Since']);		else			$ifModified = new DateTime(strstr($requestHeaders['If-Modified-Since'], ';', true));		$fileModifed = filemtime($filepath);		if ($ifModified->format('U') >= $fileModifed)		{			header("HTTP/1.0 304");			header("Status: 304 Not Modified");			header('Cache-Control: public, max-age='.(3600 * 24 * 7));			header('Expires: '.date('r', mktime() + 3600 * 24 * 7));			header('Content-Type: text/html');			exit();		}	}	header("HTTP/1.0 200");	header("Status: 200 OK");	header('Content-Type: text/html');	header('Cache-Control: public, max-age='.(3600 * 24 * 7));	header('Pragma: Cache');	header('Expires: '.date('r', mktime() + 3600 * 24 * 7));	header('Last-Modified: '.date('r', filemtime($filepath)));	header('Content-Length: '.filesize($filepath));	//if (array_search('mod_xsendfile', apache_get_modules()) !== false)	//	header('X-Sendfile: '.$filepath);	//else	readfile($filepath);	exit();} if (!is_file($filepath) || $force == 1){	header("HTTP/1.0 200");	header("Status: 200 OK");	header('Content-Type: text/html');	file_put_contents($filepath, $file);}?>